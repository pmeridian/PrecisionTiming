<draw>
plots neutrals_efficiency_vs_eta neutrals_efficiency_vs_pt_eta delta_tof_vs_dPhi
saveAs pdf png root
plugins 'rootlogon.C' 'gStyle->SetOptStat("")' \
        '$CMSSW_BASE/src/ExternalTools/FuriousPlotter/scripts/macros/FPCanvasStyle.C'
outDir '/eos/home-s/spigazzi/www/precision_timing/TDR/neutrals/MinBias/0PU_chi2best/'
</draw>

input /eos/user/s/spigazzi/ntuples/MTD/TDR/neutrals_reco/minbias_0PU_mtd5_chi2best.root neu_tree

tdr_lgt_header '1 < p_{T}^{#gamma} < 10 GeV. #LTPU#GT=0.'

<neutrals_efficiency_vs_eta>
customize 'SetGrid()' 'macro:FPCanvasStyle(this, "CMS", "(14 TeV)", 0, "Phase-2 Simulation", 1)'
legendHeader= tdr_lgt_header
legendXY 0.2 0.65 0.6 0.9
histos eff effwtime effRconvOnly
<eff>
        src= input
        var 'mtdTime>0 && minSChi2<500 && minTChi2<50:fabs(eta)'
        cut 'fabs(eta)<1.5 && gen_DR<0.5 && pt>0.5'
        bins 20 0 1.5 0 1
        legendEntry '#gamma with MTD hit' 'l'        
        customize 'SetTitle(";|#eta|;Efficiency")' 'GetYaxis()->SetRangeUser(0., 1.)' 'SetLineColor(kCyan-8)' 'SetMarkerColor(kCyan-8)'
        drawOptions HIST
</eff>
<effwtime= eff>
        var 'mtdTime>0 && minSChi2<500 && minTChi2<50 && fabs(mtdTime-simh_clus_tof-genpv_t-14.3*minDPhi*minDPhi)<0.105:fabs(eta)'
        customize 'SetLineColor(kRed+1)' 'SetMarkerColor(kRed+1)'        
        legendEntry '#gamma with MTD hit, #Deltat<3#sigma_{t}' 'pl'
        drawOptions PE        
</effwtime>
<effRconvOnly= eff>
        var 'mct_convRadius<118:fabs(eta)'
        customize 'SetLineColor(kBlack)' 'SetMarkerColor(kBlack)'        
        legendEntry '#gamma with conversion in tracker or BTL.' 'pl'
        drawOptions PE        
</effRconvOnly>
</neutrals_efficiency_vs_eta>

<neutrals_efficiency_vs_pt_eta= neutrals_efficiency_vs_eta>
customize 'macro:FPCanvasStyle(this, "CMS", "(14 TeV)", 0, "Phase-2 Simulation", 1, 1)'
legendHeader 
histos effwtime
eff.var 'mtdTime>0 && minSChi2<500 && minTChi2<50:fabs(eta):pt'
eff.bins 4 1 10 5 0 1.5 0 1
eff.customize 'SetTitle(";p_{T} (GeV);|#eta|;Efficiency")' 'GetYaxis()->SetRangeUser(0., 1.)' \
              'SetLineColor(kCyan-8)' 'SetMarkerColor(kCyan-8)' 'SetFillColor(kCyan-8)'
eff.legendEntry              
eff.drawOptions BOX
<effwtime= eff>
        var 'mtdTime>0 && minSChi2<500 && minTChi2<50 && fabs(mtdTime-simh_clus_tof-genpv_t-14.3*minDPhi*minDPhi)<0.105:fabs(eta):pt'
        customize+= 'SetLineColor(kRed+1)' 'SetMarkerColor(kRed+1)' 'SetFillColor(kRed+1)' 'SetContour(10000)' 'macro:gStyle->SetPaintTextFormat(".2f");
        #legendEntry '#gamma with MTD hit, #Deltat<3#sigma_{t}' 'pl'
        drawOptions COLZTEXTE
</effwtime>
<effRconvOnly= eff>
        var 'mct_convRadius<118:fabs(eta):pt'
        customize 'SetLineColor(kBlack)' 'SetMarkerColor(kBlack)' 'SetFillColor(kBlack)'
        #legendEntry '#gamma with conversion in tracker or BTL.' 'pl'
        drawOptions BOX       
</effRconvOnly>
</neutrals_efficiency_vs_pt_eta>

<delta_tof_vs_dPhi>
customize 'macro:FPCanvasStyle(this, "CMS", "(14 TeV)", 0, "Phase-2 Simulation", 1, 1)'
histos map dt
<map>
        src= input
        var 'simh_clus_time-simh_clus_tof-genpv_t:minDPhi'
        cut 'mtdTime>0 && minSChi2<50 && minTChi2<5 && simh_recoh_clus_DR>0 && fabs(eta)<1.5 && pt>1'
        bins 100 -0.1 0.1 100 0 0.2
        customize 'SetTitle(";#Delta#phi(#gamma, MTD);#Delta ToF")' 'SetMinimum(0.001)' 'GetXaxis()->SetNdivisions(507)'
        drawOptions COLZ
</map>
<dt= map>
        bins 100 -0.1 0.1 0 1
        customize+= 'SetMarkerColor(kMagenta)' 'SetLineColor(kMagenta)'
        drawOptions PE
</dt>
</delta_tof_vs_dPhi>
